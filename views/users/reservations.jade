extends ../layout

block content
    link(href='/css/users/user.css',rel='styleSheet')
    include ../includes/responsive
    include ../includes/nav
    .positon.wrapper
        |您的位置为：首页<em>#{sep}</em>我的订单
    section.wrapper.userBox.clearfix
        aside.fl
            -var serviceTypeJSON = {'0':'未选择','1':'门诊取样','2':'上门取样','3':'快递取样'};
            -var statusJSON = {'0':'未处理','1':'处理中','2':'处理完成','4':'取消'};
            div.user-main.text-center
                img(src='/images/user.png')
                span.tel.text-sec #{account}
            ul.left-nav
                li: a(href='/trade/order/list') 我的订单
                li: a.on(href='/users/reservation/list') 我的预约
                li: a(href='/users/register/list') 我的挂号
                li: a(href='/users/coupon/listView?useState=1') 我的优惠券
                li: a(href='/users/patient/list') 就诊人
        .box-right.reservation.fr
            each item in data
                -var orderState = item.orderState;
                dl.order(data-id="#{item.id}")
                    dt
                        |订单编号：#{item.id}
                        time.date-time.text-sec #{item.updatedAt}
                    dd
                        .col.goods
                            -var transmitType = '';
                            each goods,index in item.reservations
                                .row
                                    span.row-col.goods-detail
                                        img.fl(src='#{goods.goodsInfo.imageUrls[0]}')
                                        h5.fr: a(href='#') #{goods.goodsInfo.goodsName}
                        .col.detail.text-sec
                            p 受检人:#{item.checkedName}
                            p 取样方式:#{serviceTypeJSON[item.serviceType]}
                            -var address = '';
                            each area in JSON.parse(item.reservations[0].goodsInfo.address)
                                -address += area.name;
                            p 取样地址:#{address}
                        -var resStatus = item.status;
                        .col.order-state.text-sec
                            if resStatus == 1 || resStatus == 2
                                p.text-stress
                                    |#{statusJSON[resStatus]}
                            else
                                p
                                    |#{statusJSON[resStatus]}

                        .col.operation
                            p: a(href='/users/reservation/detail?id=#{item.id}') 订单详情
                            if resStatus == 2
                                p: a(href='') 查看报告




    include ../includes/footer
    script.
        seajs.use('/js/trade/order_list.js')
