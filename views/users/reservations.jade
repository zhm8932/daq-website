extends ../layout

block content
    link(href='/css/users/user.css',rel='styleSheet')
    include ../includes/responsive
    include ../includes/nav
    .positon.wrapper
        |您的位置为：首页<em>#{sep}</em>#{title}
    section.wrapper.userBox.clearfix
        -var serviceTypeJSON = {'0':'未选择','1':'门诊取样','2':'上门取样','3':'快递取样'};
        -var statusJSON = {'0':'未处理','1':'处理中','2':'处理完成','4':'取消'};
        include ../includes/usersNav
        .box-right.reservation.fr
           if !data.length
               .noData
                   p 还没有预约哦
           else
            each item in data
                -var orderState = item.orderState;
                dl.order(data-id="#{item.id}")
                    dt
                        |订单编号：#{item.id}
                        time.date-time.text-sec #{moment(item.updatedAt).format('YYYY-MM-DD HH:mm:ss')}
                    dd
                        .col.goods
                            -var transmitType = '';
                            each goods,index in item.reservations
                                .row
                                    span.row-col.goods-detail
                                        a(href="/screenings/goods/detail/#{goods.goodsInfo.goodsId}")
                                            img.fl(src='#{goods.goodsInfo.imageUrls[0]}')
                                            h5.fr #{goods.goodsInfo.goodsName}
                        .col.detail.text-sec
                            //p 受检人:#{item.checkedName}
                            p 取样方式:#{serviceTypeJSON[item.serviceType]}
                            -var address = '';
                            each area in JSON.parse(item.reservations[0].goodsInfo.address)
                                -address += area.name;
                            p 取样地址:#{address}
                        -var resStatus = item.status;
                        .col.order-state.text-sec
                            if resStatus == 1 || resStatus == 2
                                p.text-stress
                                    |#{statusJSON[resStatus]}
                            else
                                p
                                    |#{statusJSON[resStatus]}

                        .col.operation
                            p: a(href='/users/reservation/detail?id=#{item.id}') 订单详情
                            if resStatus == 2
                                p: a(href='') 查看报告




    include ../includes/footer
    script.
        seajs.use('/js/trade/order_list.js')
