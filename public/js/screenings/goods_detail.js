define(function(require){function a(){var a=[],t=$("#goods"),e={},r=$("#transmit-type .type.on");e.transmitType=r.attr("data-transmitType");var i=r.attr("data-favPrice"),n=parseInt(t.attr("data-discountPrice"))-parseInt(i);e.favPrice=i,e.subTotal=n;var s=JSON.parse($("#locals_address").val());if("sampling_home"==r.data("transmitType")){var o=$("#area").val();s.push(o)}e.address=JSON.stringify(s),e.goodsId=t.attr("data-id"),e.imgUrl=t.attr("data-imgUrl"),e.goodsName=t.attr("data-goodsName"),e.discountPrice=t.attr("data-discountPrice"),a.push(e),$("#submitForm input[name=items]").val(JSON.stringify(a)),$("#submitForm input[name=totalPrice]").val(n),$("#submitForm").submit()}function t(a){r.SendAjax({url:a.url,param:a.param,method:"GET",tipText:"获取地址",callback:function(t){for(var e=t.data,r=[],i=0;i<e.length;i++){var n={};n.id=e[i].id,n.name=e[i].name,n.level=e[i].level,r.push("<option value="+JSON.stringify(n)+">"+n.name+"</option>")}$("#"+a.id).html(r.join("")),a.fun&&a.fun()}})}function e(){var a=$("#transmit-type .type.on"),t=a.attr("data-value"),e=JSON.parse($("#locals_address").val());if("sampling_home"==a.data("transmitType")){var i=$("#area").val();e.push(i)}var n=$("#goods").data("id"),s={address:JSON.stringify(e),transmit_type:t,goodsId:n};r.SendAjax({url:"/trade/cart/addItem",param:s,method:"POST",tipText:"加入购物车",callback:function(a){r.AlertTip("success","加入购物车成功")}})}var r=(require("../config"),require("../utils.js"));require("touchslider"),$(function(){var r=JSON.parse($("#locals_address").val()),i=$("#transmit-type .type"),n=!0;i.each(function(a,e){var s=$(e);s.on("click",function(){i.removeClass("on"),s.addClass("on");var a=s.attr("data-transmitType");if("sampling_home"==a){if($("#area").removeClass("none"),n){var e=r[1].categoryId;t({id:"area",url:"/dic/list/parentId",param:{activeState:1,parentId:e}}),n=!1}}else $("#area").addClass("none")})}),$(".slideBox").touchSlider({container:this,duration:350,delay:3e3,margin:5,mouseTouch:!0,namespace:"touchslider",next:".next",pagination:".tit span",currentClass:"on",prev:".prev",autoplay:!1,viewport:".touchslider-viewport"}),$("#addCartBtn").on("click",function(){e()}),$("#toOrder").on("click",function(){a()})})});