webpackJsonp([18],{0:function(t,exports,a){a(195),t.exports=a(7)},195:function(t,exports,a){var e;e=function(require,exports,t){function e(t,a){var e=t.closest(".table-tr").find(".operation"),o=e.attr("data-city"),c=$(".table-tr .checkbox.checked").length,n=null;a&&1==c?(n=$(".table-tr .checkbox").not(".deleted"),n.each(function(t,a){var e=$(a).closest(".table-tr"),c=e.find(".operation").attr("data-city");c!=o&&($(a).addClass("not-in-area"),e.find(".mask").removeClass("none"))})):a||0!=c||(n=$(".table-tr .checkbox.not-in-area").not(".deleted"),n.each(function(t,a){var e=$(a).closest(".table-tr");e.find(".operation").attr("data-city");$(a).removeClass("not-in-area"),e.find(".mask").addClass("none")}))}function o(t){d.CheckLogin(function(){r.ShowComfirmDialog({tipText:"确定删除吗?",okCallback:function(){t.off("click");var a=$(t).closest(".operation").attr("data-id");r.SendAjax({url:"/trade/cart/delItem",param:{id:a},method:"POST",tipText:"删除",callback:function(a){t.closest(".table-tr").hide(500),t.closest(".table-tr").find(".checkbox").addClass("deleted").removeClass("checked"),d.cartCoutDelOne(),i()},errorFun:function(a){t.on("click",function(){o(t)})}})}})})}function c(t){var a=$(".tfoot .check-all");t.hasClass("checked")?(t.removeClass("checked"),a.hasClass("checked")&&a.removeClass("checked")):t.addClass("checked"),i()}function n(t){var a=$(".table-tr .checkbox").not(".deleted").not(".not-in-area");t.hasClass("checked")?(a.each(function(t,a){$(a).removeClass("checked"),e($(a),!1)}),$(t).removeClass("checked")):(a.each(function(t,a){$(a).hasClass("not-in-area")||($(a).addClass("checked"),e($(a),!0))}),$(t).addClass("checked")),i()}function i(){var t=$(".table-tr .checkbox.checked"),a=t.length,e=0;t.each(function(t,a){var o=parseFloat($(a).closest(".table-tr").find(".operation").attr("data-subTotal"));e+=o}),$(".tfoot .price").html("￥"+(e/100).toFixed(2)),$(".tfoot .num").html(a),a>0?$(".submit-btn").addClass("back-stress").off("click").on("click",function(){s(t,e)}):$(".submit-btn").removeClass("back-stress").off("click")}function s(t,a){var e=[];t.each(function(t,a){var o=$(a).closest(".table-tr").find(".operation"),c={};c.id=o.attr("data-id"),c.goodsId=o.attr("data-goodsId"),c.imgUrl=o.attr("data-imgUrl"),c.goodsName=o.attr("data-goodsName"),c.discountPrice=o.attr("data-discountPrice"),c.transmitType=o.attr("data-transmitType"),c.address=o.attr("data-address"),c.hospital=o.attr("data-hospital"),c.subTotal=o.attr("data-subTotal"),c.favPrice=o.attr("data-favPrice"),e.push(c)}),$("#submitForm input[name=items]").val(JSON.stringify(e)),$("#submitForm input[name=totalPrice]").val(a),$("#submitForm").submit()}var r=a(4),d=a(9);$(function(){var t=r.SetMinHeight(),a=$(".empty-cart-box");a&&t>=0&&a.css("margin-top",(t-a.height())/2+"px"),$(".del-cart-item").on("click",function(){o($(this))}),$(".table-tr .checkbox").on("click",function(){c($(this),$(this))}),$(".tfoot .check-all").on("click",function(){n($(this))}),$(".submit-btn").on("click",function(){}),$(".empty-cart .to-buy").on("click",function(){window.location.href="/screenings/goods"})});var l;$("body").on("mousedown",".table-tr",function(){var t=$(this).find(".del-cart-item");l=setTimeout(function(){o(t)},2e3)}),$("body").bind("mouseup",function(){clearTimeout(l)})}.call(exports,a,exports,t),!(void 0!==e&&(t.exports=e))}});