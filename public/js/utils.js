define(function(require,exports,module){function e(e){var t={ok:"ok",cancel:"cancel",globalBg:"globalBg",popupBox:"popupBox",otherBox:"",isHide:!0,msg:"请输入内容",delayTime:2e3,okText:"确定",okCallback:null};this.opts=$.extend({},t,e),this.popupBox=this.opts.popupBox,this.$body=$("body"),this.init()}function t(e){var t={closeBtn:".closeBtn",mainCell:"msgBox",title:"提示语",delayTime:1500,interTime:1500,width:300,height:50,effect:"fade"};this.options=$.extend({},t,e),this.mainCell=this.options.mainCell,this.init()}function i(e){var t=$("#"+e).val();return""==t.trim()?($("#"+e).parent().find(".tip").html("不能为空"),!1):!0}function o(e){$.ajax({url:e.url,type:e.method||"GET",data:e.param||{},success:function(t){var i=JSON.parse(t);i.success?e.callback&&e.callback(i):(s("fail",e.tipText+"失败,原因是:"+i.msg),e.errorFun&&e.errorFun())},error:function(t){"404"==t.status?s("fail","页面丢失，稍后再试"):"500"==t.status?s("fail","系统忙，稍后再试"):s("fail","出错了,响应码是"+t.status+",请联系管理员"),e.errorFun&&e.errorFun()}})}function s(e,t,i){if("success"==e)var o='<div id="alertTip" class="alert-tip alert-success ">'+t+"</div>";else var o='<div id="alertTip" class="alert-tip alert-fail">'+t+"</div>";$(o).appendTo($("body").eq(0)),$("#alertTip").center(),$("#alertTip").show(1e3),setTimeout(function(){$("#alertTip").hide(1e3),$("#alertTip").remove(),i&&i()},2500)}function n(e,t,i,o){var s=e+"="+escape(t);if(s+="; path="+i,o>0){var n=new Date;n.setTime(n.getTime+3600*o*1e3),s=s+"; expire="+n.toGMTString()}document.cookie=s}function a(e){for(var t=document.cookie,i=t.split("; "),o=0;o<i.length;o++){var s=i[o].split("=");if(s[0]==e)return s[1]}return""}function l(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=v; expire="+t.toGMTString()}function p(e){if(e)var t=new Date(e);else var t=new Date;var i=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),n=i+":"+o+":"+s;return n}function r(e){if(e)var t=new Date(e);else var t=new Date;var i=t.getFullYear(),o=t.getMonth()<10?"0"+t.getMonth():t.getMonth(),s=t.getDate()<10?"0"+t.getDate():t.getDate(),n=i+"-"+o+"-"+s;return n}function c(e){for(var e=e.replace(/\+/g," ").split("&"),t={},i="",o=0,s=e.length;s>o;o++)i=e[o].split("="),t[i[0]]=decodeURIComponent(decodeURI(i[1])).trim();return t}function d(e,t,i){e.hasClass("disabled")||(e.hasClass("checked")?e.removeClass("checked"):($(t).removeClass("checked"),e.addClass("checked")),i&&i())}function u(){var e=new utils.Popup({msg:'<div id="slideLogin"><div class="tit"><span class="on">密码登录</span><span>验证码登录</span></div><div class="touchslider-viewport"><div class="bd"> <ul><li><input type="text" class="username" placeholder="请输入手机号码" value="13689557622"></li><li><input type="password" class="password" placeholder="请输入密码" value="zhm123456"><span class="prompt"><i class="icon"></i><em>手机输入格式有误/验证码有误</em></span></li></ul><ul><li><input type="text" class="username" placeholder="请输入手机号码"></li><li><input type="text" class="code" placeholder="请输入短信验证码"><span class="getCode">获取短信验证码</span><span class="prompt"><i class="icon"></i><em>手机输入格式有误/验证码有误</em></span></li></ul></div></div></div>',otherMsg:"手机号码用来获取预约码和报告服务码",bOhterMsg:!0,callback:function(){$("#slideLogin").touchSlider({container:this,duration:350,delay:3e3,margin:5,mouseTouch:!0,namespace:"touchslider",next:".touchslider-next",pagination:".tit span",currentClass:"on",prev:".touchslider-prev",autoplay:!1,viewport:".touchslider-viewport"})},okText:"登录",width:"360",otherBox:"loginBox",isHide:!1,okCallback:function(){console.log("222222");var t={password:$(".password").val(),account:$(".username").val()};x=$(".popupBox article .tit span.on").index(),console.log("index::",x),h(t,e,x)}})}function h(e,t,i){var i=$(".popupBox article .tit span.on").index(),o=$(".popupBox article").find("ul").eq(i).find(".prompt");$.ajax({type:"post",url:"/login",data:e,success:function(e){if(console.log(e),e.success){new utils.MsgShow({delayTime:2e3,title:'<i class="icon"></i>登录成功!',otherBox:"successBox"});t.hideBox(function(){$(".msgBox").hide(),m.html(v)})}else o.show().find("em").html(e.msg)}})}require("jquery");require("./config");e.prototype={init:function(){var e=this;e.render(),$("."+e.popupBox).show(),e.$body.off("click","."+e.opts.ok),e.$body.on("click","."+e.opts.ok,function(){e.opts.okCallback(),e.opts.isHide&&e.hideBox()}),this.$body.on("click","."+this.opts.cancel,function(){e.cancelCallback()})},hideBox:function(e){var t=this;setTimeout(function(){$("."+t.popupBox).hide(),$("."+t.opts.globalBg).hide(),e&&e()},t.opts.delayTime)},globalBgFn:function(){var e='<div class="globalBg"></div>';$(".globalBg").length?$(".globalBg").show():this.$body.append(e)},render:function(){var e=this;e.globalBgFn(),$("."+e.popupBox).length?($("."+e.popupBox).remove(),e.$body.append(this.popupHtml())):this.$body.append(this.popupHtml());var t=$("."+this.opts.popupBox).height();$("."+e.popupBox).css({height:t,"margin-top":-t/2})},popupHtml:function(){var e=this.opts,t='<div class="'+this.popupBox+" "+this.opts.otherBox+'" style="width: '+e.width+"px;margin-left:-"+e.width/2+'px"><span class="'+this.opts.cancel+'">关闭</span><article>'+this.opts.msg+'</article><div class="submitBox"><span class="'+this.opts.ok+'">'+this.opts.okText+"</span></div></div>";return t},cancelCallback:function(){$(".globalBg").hide(),$("."+this.popupBox).remove()}},t.prototype={init:function(){var e=this,t=e.options,i=t.effect;t.interTime;switch(i){case"fade":this.render(),$("."+e.mainCell).fadeIn()}},setHtml:function(){return'<div class="'+this.options.mainCell+'"></div>'},hideMsg:function(e){var t=this;setTimeout(function(){$("."+t.mainCell).hide(),"function"==typeof e&&e()},this.options.delayTime)},render:function(){var e=this.options,t=e.width,i=e.height;console.log("99999999"),$("."+e.mainCell).length?$("."+e.mainCell).show():$("body").append(this.setHtml()),$("."+e.mainCell).html(this.options.title),$("."+e.mainCell).css({width:t+"px",height:i+"px","line-height":i+"px","margin-left":-t/2,"margin-top":-i/2}).show()}};var g=navigator.userAgent,f=(navigator.appVersion,{trident:g.indexOf("Trident")>-1,presto:g.indexOf("Presto")>-1,webKit:g.indexOf("AppleWebKit")>-1,gecko:g.indexOf("Gecko")>-1&&-1==g.indexOf("KHTML"),mobile:!!g.match(/AppleWebKit.*Mobile.*/),ios:!!g.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:g.indexOf("Android")>-1||g.indexOf("Linux")>-1,iPhone:g.indexOf("iPhone")>-1,iPad:g.indexOf("iPad")>-1,webApp:-1==g.indexOf("Safari")});jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",($(window).height()-this.height())/2+$(window).scrollTop()+"px"),this.css("left",($(window).width()-this.width())/2+$(window).scrollLeft()+"px"),this},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};var m=$(".topBar_info aside"),v='<a href="/users/orders" class="logout">个人中心</a><i class="icon devidel"></i><a href="javascript:;" class="logoutBtn">退出</a>',x="";module.exports={Popup:e,MsgShow:t,CheckNull:i,browser:f,SendAjax:o,stringJSON:c,AlertTip:s,AddCookie:n,GetCookie:a,DeleteCookie:l,GetLoacalTimeString:p,GetLoacalDateString:r,CheckRadio:d,showLogin:u,login:h}});