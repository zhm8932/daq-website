webpackJsonp([22],{0:function(t,exports,a){a(210),t.exports=a(7)},209:function(t,exports,a){var n;n=function(require,exports,t){function n(t){function a(n,e){if(n<0)return t.outdatedFun&&t.outdatedFun(),!1;e.attr("data-restTime",1e3*n);var i=parseInt(n/60)<10?"0"+parseInt(n/60):parseInt(n/60),o=parseInt(n%60)<10?"0"+parseInt(n%60):parseInt(n%60);e.html(i+t.minuteUnit+o+t.secondUnit),n--,setTimeout(function(){a(n,e)},1e3)}var n={minuteUnit:"分",secondUnit:"秒",outdatedFun:function(){window.location.reload()}},e="true"===$("#browser-mobile").val();e&&(n.minuteUnit=" : ",n.secondUnit=""),t=$.extend({},n,t);var i=$(".timer");i.each(function(n,e){var i=$(e),o=parseInt(i.attr("data-paytime")),r=parseInt(i.attr("data-currenttime")),c=parseInt((t.totalTime-(r-o))/1e3);a(c,i)})}a(3),exports.updateTime=n}.call(exports,a,exports,t),!(void 0!==n&&(t.exports=n))},210:function(t,exports,a){var n;n=function(require,exports,t){function n(t,a){var n=window.location.href,e=n.substr(0,n.indexOf("/",n.indexOf("/",n.indexOf("/")+1)+1));s.CheckLogin(function(){c.SendAjax({url:"/trade/order/pay",param:{id:t,payWay:a,ext:e+"/users/register/list"},method:"POST",tipText:"前往支付页面",callback:function(t){window.location.href=t.data.credentia.order_info},errorFun:function(t){}})})}function e(t,a){s.CheckLogin(function(){c.SendAjax({url:"/trade/order/pay",param:{id:t,payWay:a},method:"POST",tipText:"前往支付页面",callback:function(t){var a="true"===$("#isMobile").val();a?i(t):o(t)},errorFun:function(t){}})})}function i(t){var a=null;new c.Popup({msg:'<div class="wechat-pay-dialog"><div class="left-box"><img src="data:image/png;base64,'+t.data.credentia.orderInfo+'"/><div class="wechat-tip"><i class="icon scan"></i><span class="scan-tip">请使用微信"扫一扫"扫描二维码支付</span></div><div class="price text-stress">￥'+t.data.tradeDTO.amount/100+"</div></div><div>",otherMsg:"",bOhterMsg:!0,callback:function(){a=setInterval(function(){r(function(t){0!=t.data.reservationStatus&&(window.location.href="/users/register/list")})},3e3)},okText:"登录",width:"300",otherBox:"wechat-box",isHide:!1,okCallback:function(){},cancelFun:function(){clearInterval(a)}})}function o(t){var a=null;new c.Popup({msg:'<div class="wechat-pay-dialog"><div class="left-box"><img src="data:image/png;base64,'+t.data.credentia.orderInfo+'"/><div class="wechat-tip"><i class="icon scan"></i><span class="scan-tip">请使用微信"扫一扫"扫描二维码支付</span></div><div class="price text-stress">￥'+t.data.tradeDTO.amount/100+'</div></div><div class="right-box"><img src="/public/images/wxsm_img.png"/></div><div>',otherMsg:"",bOhterMsg:!0,callback:function(){a=setInterval(function(){r(function(t){0!=t.data.reservationStatus&&(window.location.href="/users/register/list")})},3e3)},okText:"登录",width:"730",otherBox:"wechat-box",isHide:!1,okCallback:function(){},cancelFun:function(){clearInterval(a)}})}function r(t){var a=$("#orderId").val();c.SendAjax({url:"/treats/order/state",param:{reservationId:a},method:"GET",tipText:"查询订单状态",callback:function(a){t&&t(a)},errorFun:function(t){}})}var c=a(4),s=a(9);r(function(t){0!=t.data.reservationStatus&&(window.location.href="/treat/regsource/list")});var d=a(209),u=$("#payId").val();$(function(){d.updateTime({totalTime:18e5,outdatedFun:function(){window.location.href="/users/register/list"}}),$(".alipay").on("click",function(){var t=$(this);r(function(a){if(0==a.data.reservationStatus){var e=t.attr("data-paynum");n(u,e)}else c.ShowComfirmDialog({tipText:"不是未支付状态的订单不允许支付！",noConfirmBtn:!0})})}),$(".wechat-pay").on("click",function(){r(function(t){0==t.data.reservationStatus?e(u,6):c.ShowComfirmDialog({tipText:"不是未支付状态的订单不允许支付！",noConfirmBtn:!0})})})})}.call(exports,a,exports,t),!(void 0!==n&&(t.exports=n))}});