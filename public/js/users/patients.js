define(function(require,exports,module){function t(){var t='<tr class="new-tr"><td class="name"><input placeholder="就诊人姓名"/></td><td class="gender"><div class="select-box"><div class="selected"><span class="text">请选择</span><i class="icon pull-down"></i></div><ul class="options"><li class="option">男</li><li class="option">女</li></ul></div></td><td class="birthday"><input placeholder="出生年月"/></td><td class="telephone"><input placeholder="联系电话"/></td><td class="new-patient"><a class="text-main" href="javascript:void(0)">添加</a></td></tr>',i=$(t);e.BuildSelect(i.find(".select-box")),i.find(".new-patient").on("click",function(){n($(this))}),$("#add-tr").closest("tr").before(i)}function n(t){var n="",d="",a="",l="",c="",s={1:"男",2:"女"},o=t.closest("tr");o.find(".name input"),o.find(".gender .options .option.active"),o.find(".birthday input"),o.find(".telephone input");e.SendAjax({url:"/users/patient/add",param:{name:n,gender:d,birthday:a,telephone:l},method:"POST",tipText:"添加就诊人",callback:function(t){o.html("<td>"+n+"</td><td>"+s[d]+"</td><td>"+c+"</td><td>"+l+'</td><td><a href="javascript:void(0)" class="del-patient">删除</a></td>'),o.data("id",t.data.id),o.find(".del-patient").on("click",function(){i($(this))})},errorFun:function(t){}})}function i(t){d.CheckLogin(function(){var n=t.closest("tr"),i=n.data("id");e.SendAjax({url:"/users/patient/del",param:{contactPersonId:i},method:"POST",tipText:"删除就诊人",callback:function(t){n.hide(1e3)},errorFun:function(t){}})})}var e=require("../libs/utils.js"),d=require("../login.js");$(".del-patient").on("click",function(){i($(this))}),$("#add-tr").on("click",function(){t()})});