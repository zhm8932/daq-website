webpackJsonp([27],{0:function(t,o,n){n(215),t.exports=n(7)},215:function(t,o,n){var e;e=function(t,o,e){function a(t,o){var n={pageSize:100,useState:o,pageIndex:1};u.SendAjax({url:"/users/coupon/list",param:n,method:"GET",tipText:"获取优惠券",callback:function(o){var n=o.data,e=[];if(n.length<=0)$("#coupon-table tbody").html('<tr class="text-center"><td colspan="5">暂无优惠券记录</td></tr>');else{for(var a=0;a<n.length;a++)e.push(c(n[a]));$("#coupon-table tbody").html(e.join(""))}$(".coupon-state li.on").removeClass("on"),t.addClass("on")},errorFun:function(t){}})}function i(t){var o=$("#coupon-code").val().trim();return o?(t.addClass("disabled").off("click"),void u.SendAjax({url:"/users/coupon/addByInvite",param:{inviteCode:o},method:"POST",tipText:"添加优惠券",callback:function(o){u.ShowComfirmDialog({tipText:"领取成功!",noConfirmBtn:!0}),$("#coupon-code").val("");var n=$(c(o.data));$("#coupon-table tbody tr").eq(0).before(n),$("#coupon-table tbody tr.no-record").remove(),t.removeClass("disabled").on("click",function(){i(t)})},errorFun:function(){t.removeClass("disabled").on("click",function(){i(t)})}})):(u.ShowComfirmDialog({tipText:"请输入优惠码",noConfirmBtn:!0}),!1)}function c(t){var o,n,e=[],a=JSON.parse(t.fitArea),i=[],c=[];for(n=0;n<a.length;n++)i.push(a[n].hospitalName),c.push(a[n].hospitalCode);return"cash"==t.ftype?(o=parseInt(t.enoughMoney),e.push("<tr>"),e.push("<td>"+(parseFloat(t.faceValue)/100).toFixed(2)+"元</td>"),0==o?e.push("<td>无门槛</td>"):e.push("<td>满"+(o/100).toFixed(2)+"元使用</td>")):"discount"==t.ftype&&(e.push("<tr>"),e.push("<td>"+t.discount+"折</td>"),e.push("<td>最多可抵"+(parseFloat(t.mostDeduction)/100).toFixed(2)+"元</td>")),e.push("<td>限"+i.join("、")+"</td>"),e.push("<td >"+u.GetLoacalDateString(t.beginTime)+" 至 "+u.GetLoacalDateString(t.endTime)+"</td></tr>"),e.join("")}var u=n(4);n(9);$(".date").each(function(t,o){var n=$(o),e=parseInt(n.html()),a=u.GetLoacalDateString(e);n.html(a)}),$(".add-coupon").on("click",function(){i($(this))}),$(".coupon-state .unuse").on("click",function(){a($(this),"1")}),$(".coupon-state .used").on("click",function(){a($(this),"2")}),$(".coupon-state .overdue").on("click",function(){a($(this),"3")})}.call(o,n,o,t),!(void 0!==e&&(t.exports=e))}});