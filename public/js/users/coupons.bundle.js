webpackJsonp([26],{0:function(t,exports,o){o(214),t.exports=o(7)},214:function(t,exports,o){var n;n=function(require,exports,t){function n(t,o){var n={pageSize:100,useState:o,pageIndex:1};i.SendAjax({url:"/users/coupon/list",param:n,method:"GET",tipText:"获取优惠券",callback:function(o){var n=o.data,e=[];if(n.length<=0)$("#coupon-table tbody").html('<tr class="text-center"><td colspan="5">暂无优惠券记录</td></tr>');else{for(var i=0;i<n.length;i++)e.push(a(n[i]));$("#coupon-table tbody").html(e.join(""))}$(".coupon-state li.on").removeClass("on"),t.addClass("on")},errorFun:function(t){}})}function e(t){var o=$("#coupon-code").val().trim();return o?(t.addClass("disabled").off("click"),void i.SendAjax({url:"/users/coupon/addByInvite",param:{inviteCode:o},method:"POST",tipText:"添加优惠券",callback:function(o){i.ShowComfirmDialog({tipText:"领取成功!",noConfirmBtn:!0}),$("#coupon-code").val("");var n=$(a(o.data));$("#coupon-table tbody tr").eq(0).before(n),$("#coupon-table tbody tr.no-record").remove(),t.removeClass("disabled").on("click",function(){e(t)})},errorFun:function(){t.removeClass("disabled").on("click",function(){e(t)})}})):(i.ShowComfirmDialog({tipText:"请输入优惠码",noConfirmBtn:!0}),!1)}function a(t){var o,n,e=[],a=JSON.parse(t.fitArea),c=[],u=[];for(n=0;n<a.length;n++)c.push(a[n].hospitalName),u.push(a[n].hospitalCode);return"cash"==t.ftype?(o=parseInt(t.enoughMoney),e.push("<tr>"),e.push("<td>"+(parseFloat(t.faceValue)/100).toFixed(2)+"元</td>"),0==o?e.push("<td>无门槛</td>"):e.push("<td>满"+(o/100).toFixed(2)+"元使用</td>")):"discount"==t.ftype&&(e.push("<tr>"),e.push("<td>"+t.discount+"折</td>"),e.push("<td>最多可抵"+(parseFloat(t.mostDeduction)/100).toFixed(2)+"元</td>")),e.push("<td>限"+c.join("、")+"</td>"),e.push("<td >"+i.GetLoacalDateString(t.beginTime)+" 至 "+i.GetLoacalDateString(t.endTime)+"</td></tr>"),e.join("")}var i=o(4);o(9);$(".date").each(function(t,o){var n=$(o),e=parseInt(n.html()),a=i.GetLoacalDateString(e);n.html(a)}),$(".add-coupon").on("click",function(){e($(this))}),$(".coupon-state .unuse").on("click",function(){n($(this),"1")}),$(".coupon-state .used").on("click",function(){n($(this),"2")}),$(".coupon-state .overdue").on("click",function(){n($(this),"3")})}.call(exports,o,exports,t),!(void 0!==n&&(t.exports=n))}});