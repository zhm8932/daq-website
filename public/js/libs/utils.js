define(function(t,e,o){function i(t){return C.hex_md5(t).toUpperCase()}function n(t){var e={ok:"ok",cancel:"cancel",globalBg:"globalBg",popupBox:"popupBox",otherBox:"",isHide:!0,otherMsg:"其他提示信息",bOhterMsg:!1,msg:"请输入内容",delayTime:2e3,okText:"确定",okCallback:null,cancelFun:null,callback:null};this.opts=$.extend({},e,t),this.popupBox=this.opts.popupBox,this.$body=$("body"),this.init()}function s(t){var e={closeBtn:".closeBtn",mainCell:"msgBox",otherBox:"",title:"提示语",delayTime:1500,interTime:1500,width:300,height:50,effect:"fade"};this.options=$.extend({},e,t),this.mainCell=this.options.mainCell,this.init()}function a(t,e){var o=$(t).children(),i=$(e).children();o.hasClass("on")||o.first().addClass("on"),i.first().show();var n=$(".tabBox .hd .on").index();i.eq(n).show().siblings().hide(),o.click(function(){n=$(this).index(),$(this).addClass("on").siblings().removeClass(),i.eq(n).show().siblings().hide()})}function l(t){var e=$("#"+t).val();return""!=e.trim()||($("#"+t).parent().find(".tip").html("不能为空"),!1)}function r(t){var e=/^(13[0-9]|15[012356789]|18[0-9]|14[57]|17[678])[0-9]{8}$/;return e.test(t)}function c(t){$.ajax({url:t.url,type:t.method||"GET",data:t.param||{},dataType:t.dataType||"json",success:function(e){e.success?t.callback&&t.callback(e):(x({tipText:t.tipText+"失败,原因是:"+e.msg,noConfirmBtn:!0}),t.errorFun&&t.errorFun(e))},error:function(e){x("404"==e.status?{tipText:"页面丢失，请稍后再试",noConfirmBtn:!0}:"500"==e.status?{tipText:"系统忙，请稍后再试",noConfirmBtn:!0}:{tipText:"出错了,响应码是"+e.status+",请联系管理员",noConfirmBtn:!0}),t.errorFun&&t.errorFun()}})}function p(t,e,o){if("success"==t)var i='<div id="alertTip" class="alert-tip alert-success ">'+e+"</div>";else var i='<div id="alertTip" class="alert-tip alert-fail">'+e+"</div>";$(i).appendTo($("body").eq(0)),$("#alertTip").center(),$("#alertTip").show(1e3),setTimeout(function(){$("#alertTip").hide(1e3),$("#alertTip").remove(),o&&o()},2500)}function d(t,e,o,i){var n=t+"="+encodeURIComponent(e);if(i>0){var s=new Date;s.setTime(s.getTime+3600*i*1e3),n=n+";expires="+s.toGMTString()}n+=";path="+o,document.cookie=n}function h(t){for(var e=document.cookie,o=e.split("; "),i=0;i<o.length;i++){var n=o[i].split("=");if(n[0]==t)return decodeURIComponent(n[1])}return""}function u(t){var e=new Date;e.setTime(e.getTime()-1e4),document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT"}function g(t){if(t)var e=new Date(t);else var e=new Date;var o=e.getHours()<10?"0"+e.getHours():e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),n=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),s=o+":"+i+":"+n;return s}function f(t){if(t)var e=new Date(t);else var e=new Date;var o=e.getFullYear(),i=parseInt(e.getMonth())+1,n=i<10?"0"+i:i,s=e.getDate()<10?"0"+e.getDate():e.getDate(),a=o+"-"+n+"-"+s;return a}function b(t){if(t)var e=new Date(t);else var e=new Date;var o=e.getFullYear(),i=parseInt(e.getMonth())+1,n=i<10?"0"+i:i,s=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getHours()<10?"0"+e.getHours():e.getHours(),l=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),c=o+"-"+n+"-"+s+"&nbsp;"+a+":"+l+":"+r;return c}function m(t){for(var t=t.replace(/\+/g," ").split("&"),e={},o="",i=0,n=t.length;i<n;i++)o=t[i].split("="),e[o[0]]=decodeURIComponent(decodeURI(o[1])).trim();return e}function v(t,e,o){t.hasClass("disabled")||(t.hasClass("checked")?t.removeClass("checked"):($(e).removeClass("checked"),t.addClass("checked")),o&&o())}function x(t){var e="";e=t.noConfirmBtn?'<div class="box-header">提示<i class="icon close closePopup"></i></div><div class="box-body"><p class="confim-tip">'+t.tipText+'</p><div class="btn-box"><button class="cancelBtn closePopup">确定</button></div></div>':'<div class="box-header">提示<i class="icon close closePopup"></i></div><div class="box-body"><p class="confim-tip">'+t.tipText+'</p><div class="btn-box"><button class="submitBtn confirm-btn">确定</button><button class="cancelBtn closePopup">取消</button></div></div>';new n({msg:e,otherMsg:"confirm-btn",popupBox:"popupBox",ok:"confirm-btn",cancel:"closePopup",callback:function(){t.callback&&t.callback()},otherBox:"confirm-box",okCallback:function(){t.okCallback&&t.okCallback()}})}function k(t){t.each(function(t,e){var o=$(e);o.on("click",function(t){$(".select-box").not($(this)).removeClass("open"),o.hasClass("open")?o.removeClass("open"):o.addClass("open")}),o.find(".options").on("click",function(t){t.stopPropagation();var e=$(this),o=$(t.target);o.siblings().removeClass("active"),o.addClass("active");var i=e.closest(".select-box"),n=i.find(".selected .text");n.html(o.html()),i.removeClass("open")})})}function B(){var t=$(window).height(),e=$("body>.topBar").outerHeight(!0)+$("body>.header").outerHeight(!0)+$("body>.nav").outerHeight(!0)+$("body>.positon").outerHeight(!0)+$("body>.footer").outerHeight(!0)+$("body>.copyright").outerHeight(!0);console.log($("body>.topBar").outerHeight(!0)+"----"+$("body>.header").outerHeight(!0)+"----"+$("body>.nav").outerHeight(!0)+"----"+$("body>.positon").outerHeight(!0)+"----"+$("body>.footer").outerHeight(!0)+"----"+$("body>.copyright").outerHeight(!0));var o=t-e+$("body>.topBar").outerHeight(!0);return $(".main-box").css("min-Height",o+"px"),console.log(t+"----"+e+"----"+o),o}t("jquery"),t("touchslider");var C=t("./md5");n.prototype={init:function(){var t=this;t.render(),$("."+t.popupBox).show(),t.$body.off("click","."+t.opts.ok),t.$body.on("click","."+t.opts.ok,function(){t.opts.okCallback(),t.opts.isHide&&t.hideBox()}),$(window).on("keydown",function(e){"13"==e.keyCode&&(t.opts.okCallback(),t.opts.isHide&&t.hideBox())});var e="."+this.opts.cancel;this.$body.on("click",e,function(){t.cancelCallback()})},hideBox:function(t){var e=this;setTimeout(function(){$("."+e.popupBox).hide(),$("."+e.opts.globalBg).hide(),t&&t()},e.opts.delayTime)},globalBgFn:function(){var t='<div class="globalBg"></div>';$(".globalBg").length?$(".globalBg").show():this.$body.append(t)},render:function(){var t=this;t.globalBgFn(),$("."+t.popupBox).length?($("."+t.popupBox).remove(),t.$body.append(this.popupHtml())):this.$body.append(this.popupHtml()),t.opts.callback&&t.opts.callback();var e=$("."+this.opts.popupBox).height(),o=$("."+this.opts.popupBox).outerWidth();$("."+t.popupBox).css({height:e,"margin-top":-e/2,"margin-left":-o/2})},popupHtml:function(){var t=this.opts,e='<div class="'+this.popupBox+" "+this.opts.otherBox+'" style="width: '+t.width+"px;margin-left:-"+t.width/2+'px"><div class="innerBg"><span class="'+this.opts.cancel+'"><i class="icon"></i></span><article>'+this.opts.msg+'</article><div class="submitBox"><button class="'+this.opts.ok+'">'+this.opts.okText+"</button></div>";return t.bOhterMsg&&(e+='<div class="otherMsg">'+t.otherMsg+"</div>"),e+="</div></div>"},cancelCallback:function(){$(".globalBg").hide(),$("."+this.popupBox).remove(),this.opts.cancelFun&&this.opts.cancelFun()}},s.prototype={init:function(){var t=this,e=t.options,o=e.effect;e.interTime;switch(o){case"fade":this.render(),$("."+t.mainCell).fadeIn()}},setHtml:function(){return'<div class="'+this.options.mainCell+" "+this.options.otherBox+'"></div>'},hideMsg:function(t){var e=this;setTimeout(function(){$("."+e.mainCell).hide(),"function"==typeof t&&t()},this.options.delayTime)},render:function(){var t=this.options,e=t.width,o=t.height;$("."+t.mainCell).length?$("."+t.mainCell).show():$("body").append(this.setHtml()),$("."+t.mainCell).html(this.options.title),t.otherBox||$("."+t.mainCell).css({width:e+"px",height:o+"px","line-height":o+"px","margin-left":-e/2,"margin-top":-o/2}).show()}},a(".tabBox .hd",".tabBox .con");var w=navigator.userAgent,y=(navigator.appVersion,{trident:w.indexOf("Trident")>-1,presto:w.indexOf("Presto")>-1,webKit:w.indexOf("AppleWebKit")>-1,gecko:w.indexOf("Gecko")>-1&&w.indexOf("KHTML")==-1,mobile:!!w.match(/AppleWebKit.*Mobile.*/),ios:!!w.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:w.indexOf("Android")>-1||w.indexOf("Linux")>-1,iPhone:w.indexOf("iPhone")>-1,iPad:w.indexOf("iPad")>-1,webApp:w.indexOf("Safari")==-1,ie:w.indexOf("MSIE")>-1});jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",($(window).height()-this.height())/2+$(window).scrollTop()+"px"),this.css("left",($(window).width()-this.width())/2+$(window).scrollLeft()+"px"),this},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},o.exports={Popup:n,MsgShow:s,CheckNull:l,browser:y,SendAjax:c,stringJSON:m,AlertTip:p,AddCookie:d,GetCookie:h,DeleteCookie:u,GetLoacalTimeString:g,GetLoacalDateString:f,CheckRadio:v,getLoacalDateAndTime:b,BuildSelect:k,SetMinHeight:B,ShowComfirmDialog:x,check_tel:r,md5:i}});