!function(t){t.fn.ellipsis=function(l){var a={row:1,onlyFullWords:!1,"char":"...",callback:function(){},position:"tail"};return l=t.extend(a,l),this.each(function(){var a=t(this),i=a.text(),e=i,c=e.length,o=a.height();a.text("a");var r=parseFloat(a.css("lineHeight"),10),h=a.height(),s=r>h?r-h:0,n=s*(l.row-1)+h*l.row;if(n>=o)return a.text(i),void l.callback.call(this);var f=1,u=0,d=i.length;if("tail"===l.position){for(;d>f;)u=Math.ceil((f+d)/2),a.text(i.slice(0,u)+l["char"]),a.height()<=n?f=u:d=u-1;i=i.slice(0,f),l.onlyFullWords&&(i=i.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),i+=l["char"]}else if("middle"===l.position){for(var x=0;d>f;)u=Math.ceil((f+d)/2),x=Math.max(c-u,0),a.text(e.slice(0,Math.floor((c-x)/2))+l["char"]+e.slice(Math.floor((c+x)/2),c)),a.height()<=n?f=u:d=u-1;x=Math.max(c-f,0);var M=e.slice(0,Math.floor((c-x)/2)),g=e.slice(Math.floor((c+x)/2),c);l.onlyFullWords&&(M=M.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),i=M+l["char"]+g}a.text(i),l.callback.call(this)}),this}}(jQuery);